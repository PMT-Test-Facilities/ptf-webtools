<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Gantry Movement Control</title>
  <script src="midas.js"></script>
  <script src="mhttpd.js"></script>
  <link rel="stylesheet" href="midas.css">
  <link rel="stylesheet" href="mhttpd.css">

<script>
function setFeMoveStatus(elem) {
  if (elem.val == 0) {
    elem.innerText = 'feMove is active.';
    elem.style.classList.add('greenLight');
    elem.style.classList.remove('redLight');
  } else {
    elem.innerText = 'feMove is inactive.';
    elem.style.classList.add('redLight');
    elem.style.classList.remove('greenLight');
  }
}

function setDestination(gantry, dim, elem) {

}
</script>

</head>
<body class="mcss" onload="mhttpd_init('Movement')">

<div id="mheader"></div>
<div id="msidenav"></div>

<div id="mmain">
  <div class="mtable">
    <h3 class="mtableheader">Status</h3>
    <p id="feMoveStatus" name="modb" data-odb-path="/Programs/feMove/First failed" onchange="setFeMoveStatus(this)"></p>

  </div>

  <div class="mtable">
    <h3 class="mtableheader">Movement Control</h3>
    <table class="numeric" id="moveControl">
      <tr>
        <th></th>
        <th rowspan="3">Gantry 0</th>
        <th rowspan="3">Gantry 1</th>
      </tr>
      <tr>
        <th></th>
        <th>Destination</th>
        <th>Target</th>
        <th>Position</th>
        <th>Destination</th>
        <th>Target</th>
        <th>Position</th>
      </tr>
      <tr>
        <th>𝒙 <span class="unit">[m]</span></th>
        <td><input type="number" min="" max="" step="" id="dest-0-0"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[0]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[0]" data-format="f3"></td>
        <td><input type="number" min="" max="" step="" id="dest-1-0"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[5]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[5]" data-format="f3"></td>
      </tr>
      <tr>
        <th>𝒚 <span class="unit">[m]</span></th>
        <td><input type="number" min="" max="" step="" id="dest-0-1"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[1]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[1]" data-format="f3"></td>
        <td><input type="number" min="" max="" step="" id="dest-1-1"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[6]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[6]" data-format="f3"></td>
      </tr>
      <tr>
        <th>𝒛 <span class="unit">[m]</span></th>
        <td><input type="number" min="" max="" step="" id="dest-0-2"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[2]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[2]" data-format="f3"></td>
        <td><input type="number" min="" max="" step="" id="dest-1-2"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[7]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[7]" data-format="f3"></td>
      </tr>
      <tr>
        <th>𝜽 <span class="unit">[°]</span></th>
        <td><input type="number" min="" max="" step="" id="dest-0-3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[3]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[3]" data-format="f3"></td>
        <td><input type="number" min="" max="" step="" id="dest-1-3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[8]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[8]" data-format="f3"></td>
      </tr>
      <tr>
        <th>𝝋 <span class="unit">[°]</span></th>
        <td><input type="number" min="" max="" step="" id="dest-0-4"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[4]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[4]" data-format="f3"></td>
        <td><input type="number" min="" max="" step="" id="dest-1-4"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/control/destination[9]" data-format="f3"></td>
        <td name="modbvalue" data-odb-path="/equipment/move/variables/position[9]" data-format="f3"></td>
      </tr>
    </table>
    <div style="text-align: center;">
      <button onclick="initializeGantries()">(Re-)Initialize</button>
      <button onclick="setDestination()">Move</button><br>
      <button onclick="stopMotors(0)">Power off Gantry 0</button>
      <button onclick="stopMotors(1)">Power off Gantry 0</button>
      <button onclick="stopMotors()">Stop Gantries</button>
    </div>
  </div>
</div>

</body>
</html>